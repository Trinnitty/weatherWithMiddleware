{"ast":null,"code":"import _classCallCheck from \"E:\\\\react\\\\weatherWithMiddleware\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\react\\\\weatherWithMiddleware\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\react\\\\weatherWithMiddleware\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\react\\\\weatherWithMiddleware\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\react\\\\weatherWithMiddleware\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\react\\\\weatherWithMiddleware\\\\src\\\\components\\\\App.js\";\nimport React, { PureComponent } from \"react\";\nimport LocationService from \"../services/LocationService\";\nimport setPrevWeather from \"../actions/prevWeatherAction\";\nimport SearchWeather from \"./SearchWeather\";\nimport DescriptionWeather from \"./DescriptionWeather\";\nimport Input from \"./Input\";\nimport Details from \"./Details\";\nimport Loading from \"./Loading\";\nimport WeatherServise from \"./WeatherServise\";\nimport { connect } from \"react-redux\";\nimport { getWeather } from \"../actions/weatherAction\";\nimport { setWeatherServise } from \"../actions/weatherServiseAction\";\nimport PropTypes from \"prop-types\";\n\nvar App =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(App, _PureComponent);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      error: false\n    };\n\n    _this.componentDidMount = function () {\n      var city = _this.props.weather.weather.city; // if first enter on the app\n\n      if (!city) {\n        console.log('request for city'); //avoid  block of fetch data\n\n        setTimeout(LocationService.getIp().then(function (response) {\n          return response.json();\n        }).then(function (jsonData) {\n          console.log(jsonData.ip, 'jsonData.ip');\n          return jsonData.ip;\n        }).then(function (data) {\n          return LocationService.getCity(data);\n        }).then(function (responce) {\n          return responce.json();\n        }).then(function (jsonData) {\n          console.log(jsonData, 'jsonData');\n\n          if (jsonData.city_name) {\n            var _city = jsonData.city_name.toUpperCase();\n\n            console.log(_city, 'city');\n\n            _this.searchWeatherForCity(_city);\n          }\n\n          if (jsonData.error) {\n            _this.setState({\n              error: true\n            });\n          }\n        }).catch(function (error) {\n          _this.setState({\n            error: true\n          });\n\n          console.log(error.message, \"error LocationService\");\n        }), 3500);\n      }\n    };\n\n    _this.searchWeatherForCity = function (city) {\n      var weatherServise = _this.props.weatherServise.weatherServise;\n      var _this$props = _this.props,\n          setWeatherAction = _this$props.setWeatherAction,\n          prevWeatherAction = _this$props.prevWeatherAction,\n          loadedCityWeatherOpenweathermap = _this$props.loadedCityWeatherOpenweathermap,\n          loadedCityWeatherMetaweather = _this$props.loadedCityWeatherMetaweather;\n\n      if (_this.state.error) {\n        _this.setState({\n          error: false\n        });\n      }\n\n      if (weatherServise === \"Openweathermap\") {\n        if (loadedCityWeatherOpenweathermap[city]) {\n          console.log(\"current city weather excist\");\n\n          if (new Date().getHours() - loadedCityWeatherOpenweathermap[city].lastUpdate < 2) {\n            var cityWeather = loadedCityWeatherOpenweathermap[city];\n            prevWeatherAction(cityWeather);\n          } else {\n            setWeatherAction(city, weatherServise);\n          }\n        } else {\n          setWeatherAction(city, weatherServise);\n        }\n      }\n\n      if (weatherServise === \"MetaWeather\") {\n        if (loadedCityWeatherMetaweather[city]) {\n          console.log(\"current city weather excist\");\n\n          if (new Date().getHours() - loadedCityWeatherMetaweather[city].lastUpdate < 2) {\n            var _cityWeather = loadedCityWeatherMetaweather[city];\n            prevWeatherAction(_cityWeather);\n          } else {\n            setWeatherAction(city, weatherServise);\n          }\n        } else {\n          setWeatherAction(city, weatherServise);\n        }\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var setWeatherServiseAction = this.props.setWeatherServiseAction;\n      var city = this.props.weather.weather.city;\n      var weatherServise = this.props.weatherServise.weatherServise;\n      var weather = this.props.weather.weather;\n      var _this$props$weather = this.props.weather,\n          isFetching = _this$props$weather.isFetching,\n          error = _this$props$weather.error;\n      return React.createElement(\"div\", {\n        className: new Date().getHours() < 7 || new Date().getHours() > 20 ? \"App night\" : \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"searchBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(WeatherServise, {\n        weatherServise: weatherServise,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(Input, {\n        searchWeatherForCity: this.searchWeatherForCity,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), React.createElement(SearchWeather, {\n        setWeatherServise: setWeatherServiseAction,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      })), this.state.error && React.createElement(\"div\", {\n        className: \"errorBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Reload page or try it in another time (may be you are blocked)\"), error ? React.createElement(\"div\", {\n        className: \"errorBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Correct entered data or reload page and repeat response\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, isFetching && React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }) || React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(DescriptionWeather, {\n        city: city,\n        weather: weather,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(Details, {\n        weather: weather,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(PureComponent);\n\nApp.propTypes = {\n  weatherServise: PropTypes.object.isRequired,\n  weather: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(store) {\n  console.log(store, \"store\");\n  return {\n    weatherServise: store.weatherServise,\n    weather: store.weather,\n    loadedCityWeatherOpenweathermap: store.loadedCityWeatherOpenweathermap,\n    loadedCityWeatherMetaweather: store.loadedCityWeatherMetaweather\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    prevWeatherAction: function prevWeatherAction(weather) {\n      return dispatch(setPrevWeather(weather));\n    },\n    setWeatherServiseAction: function setWeatherServiseAction(servise) {\n      return dispatch(setWeatherServise(servise));\n    },\n    setWeatherAction: function setWeatherAction(weather, weatherServise) {\n      return dispatch(getWeather(weather, weatherServise));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["E:\\react\\weatherWithMiddleware\\src\\components\\App.js"],"names":["React","PureComponent","LocationService","setPrevWeather","SearchWeather","DescriptionWeather","Input","Details","Loading","WeatherServise","connect","getWeather","setWeatherServise","PropTypes","App","state","error","componentDidMount","city","props","weather","console","log","setTimeout","getIp","then","response","json","jsonData","ip","data","getCity","responce","city_name","toUpperCase","searchWeatherForCity","setState","catch","message","weatherServise","setWeatherAction","prevWeatherAction","loadedCityWeatherOpenweathermap","loadedCityWeatherMetaweather","Date","getHours","lastUpdate","cityWeather","setWeatherServiseAction","isFetching","propTypes","object","isRequired","mapStateToProps","store","mapDispatchToProps","dispatch","servise"],"mappings":"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","sourcesContent":["import React, { PureComponent } from \"react\";\r\nimport LocationService from \"../services/LocationService\";\r\nimport setPrevWeather from \"../actions/prevWeatherAction\";\r\nimport SearchWeather from \"./SearchWeather\";\r\nimport DescriptionWeather from \"./DescriptionWeather\";\r\nimport Input from \"./Input\";\r\nimport Details from \"./Details\";\r\nimport Loading from \"./Loading\";\r\nimport WeatherServise from \"./WeatherServise\";\r\nimport { connect } from \"react-redux\";\r\nimport { getWeather } from \"../actions/weatherAction\";\r\nimport { setWeatherServise } from \"../actions/weatherServiseAction\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass App extends PureComponent {\r\n  state = {\r\n    error: false\r\n  };\r\n  componentDidMount = () => {\r\n    const { city } = this.props.weather.weather;\r\n    // if first enter on the app\r\n    if (!city) {\r\n      console.log('request for city');\r\n      //avoid  block of fetch data\r\n      setTimeout(\r\n        LocationService.getIp()\r\n          .then(response => response.json())\r\n          .then(jsonData => {\r\n            console.log(jsonData.ip,'jsonData.ip');\r\n            return jsonData.ip;\r\n          })\r\n          .then(data => LocationService.getCity(data))\r\n          .then(responce => responce.json())\r\n          .then(jsonData => {\r\n            console.log(jsonData,'jsonData')\r\n            if (jsonData.city_name) {\r\n              let city = jsonData.city_name.toUpperCase();\r\n              console.log(city,'city')\r\n              this.searchWeatherForCity(city);\r\n            }\r\n            if(jsonData.error){\r\n              this.setState({ error: true });\r\n            }\r\n          })\r\n          .catch(error => {\r\n            this.setState({ error: true });\r\n            console.log(error.message, \"error LocationService\");\r\n          }),\r\n        3500\r\n      );\r\n    }\r\n  };\r\n\r\n  searchWeatherForCity = city => {\r\n    const { weatherServise } = this.props.weatherServise;\r\n    const {\r\n      setWeatherAction,\r\n      prevWeatherAction,\r\n      loadedCityWeatherOpenweathermap,\r\n      loadedCityWeatherMetaweather\r\n    } = this.props;\r\n   if(this.state.error){\r\n    this.setState({ error: false });\r\n   }\r\n    if (weatherServise === \"Openweathermap\") {\r\n      if (loadedCityWeatherOpenweathermap[city]) {\r\n        console.log(\"current city weather excist\");\r\n        if (\r\n          new Date().getHours() -\r\n            loadedCityWeatherOpenweathermap[city].lastUpdate <\r\n          2\r\n        ) {\r\n          let cityWeather = loadedCityWeatherOpenweathermap[city];\r\n          prevWeatherAction(cityWeather);\r\n        } else {\r\n          setWeatherAction(city, weatherServise);\r\n        }\r\n      } else {\r\n        setWeatherAction(city, weatherServise);\r\n      }\r\n    }\r\n    if (weatherServise === \"MetaWeather\") {\r\n      if (loadedCityWeatherMetaweather[city]) {\r\n        console.log(\"current city weather excist\");\r\n        if (\r\n          new Date().getHours() -\r\n            loadedCityWeatherMetaweather[city].lastUpdate <\r\n          2\r\n        ) {\r\n          let cityWeather = loadedCityWeatherMetaweather[city];\r\n          prevWeatherAction(cityWeather);\r\n        } else {\r\n          setWeatherAction(city, weatherServise);\r\n        }\r\n      } else {\r\n        setWeatherAction(city, weatherServise);\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { setWeatherServiseAction } = this.props;\r\n    const { city } = this.props.weather.weather;\r\n    const { weatherServise } = this.props.weatherServise;\r\n    const { weather } = this.props.weather;\r\n    const { isFetching, error } = this.props.weather;\r\n    return (\r\n      <div\r\n        className={\r\n          new Date().getHours() < 7 || new Date().getHours() > 20\r\n            ? \"App night\"\r\n            : \"App\"\r\n        }\r\n      >\r\n        <div className=\"searchBlock\">\r\n          <WeatherServise weatherServise={weatherServise} />\r\n          <Input searchWeatherForCity={this.searchWeatherForCity} />\r\n          <SearchWeather setWeatherServise={setWeatherServiseAction} />\r\n        </div>\r\n\r\n        {this.state.error && (\r\n          <div className=\"errorBlock\">\r\n            Reload page or try it in another time (may be you are blocked)\r\n          </div>\r\n        )}\r\n        {error ? (\r\n          <div className=\"errorBlock\">\r\n            Correct entered data or reload page and repeat response\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            {(isFetching && <Loading />) || (\r\n              <div>\r\n                <DescriptionWeather city={city} weather={weather} />\r\n                <Details weather={weather} />\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  weatherServise: PropTypes.object.isRequired,\r\n  weather: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = store => {\r\n  console.log(store, \"store\");\r\n  return {\r\n    weatherServise: store.weatherServise,\r\n    weather: store.weather,\r\n    loadedCityWeatherOpenweathermap: store.loadedCityWeatherOpenweathermap,\r\n    loadedCityWeatherMetaweather: store.loadedCityWeatherMetaweather\r\n  };\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    prevWeatherAction: weather => dispatch(setPrevWeather(weather)),\r\n    setWeatherServiseAction: servise => dispatch(setWeatherServise(servise)),\r\n    setWeatherAction: (weather, weatherServise) =>\r\n      dispatch(getWeather(weather, weatherServise))\r\n  };\r\n};\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(App);\r\n"]},"metadata":{},"sourceType":"module"}